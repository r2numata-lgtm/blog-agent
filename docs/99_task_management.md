# タスク管理

**ドキュメントバージョン**: 2.1
**最終更新日**: 2026-01-07
**関連ドキュメント**: 00_project_overview.md

---

## 📊 ステータス記号

- 🔴 未着手
- 🟡 進行中
- 🟢 完了
- 🔵 保留
- ⚫ キャンセル

---

## 🎯 開発方針の変更

**旧**: MVP（12週間）→段階的拡張  
**新**: 本格開発（20週間）→高品質な完成品

**主要な変更点:**
- Gutenberg完全対応を最初から実装
- チャットベース修正機能を追加
- 記事初期設定機能を追加
- WordPress自動投稿は削除（スコープ外）

---

## 📋 Phase 0: 初期セットアップ（Week 1）

### タスク一覧

| ID | タスク | ステータス | 担当 | 期限/完了日 |
|----|--------|----------|------|------|
| P0-01 | GitHubリポジトリ作成 | 🟢 | れんじろう | 2026-01-03完了 |
| P0-02 | ドキュメント更新（v2.0） | 🟢 | れんじろう | 2026-01-03完了 |
| P0-03 | Claude Project作成 | 🟢 | れんじろう | 2026-01-03完了 |
| P0-04 | ローカル開発環境構築 | 🟢 | れんじろう | 2026-01-03完了 |
| P0-05 | AWS CLI設定 | 🟢 | れんじろう | 2026-01-03完了 |
| P0-06 | 技術検証（Gutenbergライブラリ） | 🟢 | れんじろう | 2026-01-04完了 |

**P0-04の詳細:**
- ✅ フロントエンド環境構築完了
  - Vite + React + TypeScript
  - Tailwind CSS + 必要パッケージ12個
  - 環境変数ファイル作成
  - 動作確認済み
- ✅ バックエンド環境構築完了
  - Python 3.14 仮想環境作成
  - requirements.txt作成（最新版）
  - 依存パッケージ約40個インストール済み
  - Lambda関数ディレクトリ構造作成済み
  - 環境変数ファイル作成済み

**P0-05の詳細:**
- ✅ AWSアカウント確認（アカウントID: 115503923195）
- ✅ ルートユーザーMFA設定（my-iphone）
- ✅ IAMユーザー作成（blog-agent-admin）
  - AdministratorAccess権限付与
  - コンソールアクセス有効化
  - アクセスキー作成
- ✅ AWS CLIインストール（v2.32.28）
- ✅ AWS CLI設定
  - リージョン: ap-northeast-1（東京）
  - 出力形式: json
- ✅ 動作確認（aws sts get-caller-identity）

**P0-06の詳細:**
- ✅ React 18にダウングレード（Gutenberg互換性のため）
- ✅ Gutenberg関連パッケージインストール
  - @wordpress/block-editor
  - @wordpress/blocks
  - @wordpress/components
  - @wordpress/element
  - @wordpress/data
  - @wordpress/block-library
  - @wordpress/rich-text
  - @wordpress/i18n
- ✅ 検証用コンポーネント作成・動作確認
  - 段落ブロック作成 ✓
  - 見出しブロック作成 ✓
  - リストブロック作成 ✓
  - 画像ブロック作成 ✓
  - 引用ブロック作成 ✓
  - コードブロック作成 ✓
  - HTML変換機能 ✓
  - WordPress形式コメント生成 ✓
- ✅ 検証結果: Gutenbergライブラリは使用可能 ✓

---

## 📋 Phase 1: 認証・初期設定（Week 2-3）

### Week 2: 認証基盤

| ID | タスク | ステータス | 担当 | 期限 |
|----|--------|----------|------|------|
| P1-01 | Cognito User Pool作成 | 🟢 | れんじろう | 2026-01-05完了 |
| P1-02 | 認証画面実装（登録・ログイン） | 🟢 | れんじろう | 2026-01-06完了 |
| P1-03 | JWT認証フロー実装 | 🟢 | れんじろう | 2026-01-07完了 |
| P1-04 | パスワードリセット機能 | 🟢 | れんじろう | 2026-01-07完了 |

**P1-01の詳細:**
- ✅ Cognito User Pool作成
  - Pool ID: ap-northeast-1_NhI2bZRA1
  - Pool名: blog-agent-users
  - サインイン方式: Email
  - パスワードポリシー: 8文字以上、大小英字+数字必須
  - MFA: 無効
  - メール検証: 有効
- ✅ App Client作成
  - Client ID: 5574acr39h7824pf1acfa5032a
  - Client名: blog-agent-web
  - 認証フロー: USER_PASSWORD_AUTH, USER_SRP_AUTH, REFRESH_TOKEN_AUTH
  - トークン有効期限: Access/ID 1時間, Refresh 30日
- ✅ 環境変数ファイル更新（frontend/.env.development, backend/.env）

**P1-02の詳細:**
- ✅ amazon-cognito-identity-jsパッケージインストール
- ✅ Cognito認証サービス実装（src/services/cognito.ts）
  - サインアップ、サインイン、サインアウト
  - メール確認コード検証
  - 確認コード再送信
  - セッション管理、トークン取得
- ✅ AuthContext実装（src/contexts/AuthContext.tsx）
  - 認証状態管理
  - 自動セッション確認
- ✅ 認証画面実装
  - ログイン画面（src/pages/auth/LoginPage.tsx）
  - 登録画面（src/pages/auth/RegisterPage.tsx）
  - メール確認画面（src/pages/auth/ConfirmPage.tsx）
- ✅ ProtectedRouteコンポーネント実装
- ✅ ルーティング設定更新

### Week 3: 記事初期設定

| ID | タスク | ステータス | 担当 | 期限 |
|----|--------|----------|------|------|
| P1-05 | 記事スタイル設定画面UI | 🟢 | れんじろう | 2026-01-07完了 |
| P1-06 | サンプル記事アップロード機能 | 🟢 | れんじろう | 2026-01-07完了 |
| P1-07 | 装飾プリセット設定画面 | 🟢 | れんじろう | 2026-01-07完了 |
| P1-08 | 設定保存API（DynamoDB） | 🟢 | れんじろう | 2026-01-07完了 |
| P1-09 | 設定の読み込み・適用 | 🟢 | れんじろう | 2026-01-07完了 |

**P1-03〜P1-09の詳細:**
- ✅ JWT認証フロー実装
  - トークン自動リフレッシュ機能（期限5分前に自動更新）
  - 認証付きAPIクライアント（axios interceptors）
  - Lambda Authorizer実装（Cognito JWT検証）
- ✅ パスワードリセット機能
  - forgotPassword / confirmForgotPassword実装
  - パスワードリセット画面UI（2段階フロー）
  - パスワード変更機能（ログイン中ユーザー用）
- ✅ 記事スタイル設定画面
  - テイスト（フォーマル/カジュアル/親しみやすい/専門的）
  - 一人称・読者への呼びかけ設定
  - トーン・導入スタイル設定
- ✅ サンプル記事アップロード
  - HTML/Markdownファイルアップロード（最大3記事/100KB）
  - アップロード済み記事一覧表示・削除
- ✅ 装飾プリセット設定
  - 情報/警告/成功ボックスのON/OFF
  - 吹き出し/引用/表のON/OFF
  - SEO設定（メタディスクリプション長、キーワード数上限）
- ✅ 設定保存API
  - manage-settings Lambda関数作成
  - GET/PUT /settings API
- ✅ 設定読み込み・適用
  - settingsApi（load/save）
  - Zustandストア + localStorage永続化

---

## 📋 Phase 2: 記事生成コア（Week 4-7）

### Week 4: プロンプト設計

| ID | タスク | ステータス | 担当 | 期限 |
|----|--------|----------|------|------|
| P2-01 | 基本プロンプトテンプレート作成 | 🟢 | れんじろう | 2026-01-07完了 |
| P2-02 | スタイル反映プロンプト | 🟢 | れんじろう | 2026-01-07完了 |
| P2-03 | サンプル記事学習プロンプト | 🟢 | れんじろう | 2026-01-07完了 |
| P2-04 | 内部リンク挿入プロンプト | 🟢 | れんじろう | 2026-01-07完了 |

### Week 5: 記事生成Lambda

| ID | タスク | ステータス | 担当 | 期限 |
|----|--------|----------|------|------|
| P2-05 | 記事生成Lambda関数実装 | 🟢 | れんじろう | 2026-01-07完了 |
| P2-06 | Gutenbergブロック生成ロジック | 🟢 | れんじろう | 2026-01-07完了 |
| P2-07 | タイトル生成（3案） | 🟢 | れんじろう | 2026-01-07完了 |
| P2-08 | メタ情報生成 | 🟢 | れんじろう | 2026-01-07完了 |
| P2-09 | 内部リンク自動挿入 | 🟢 | れんじろう | 2026-01-07完了 |

### Week 6: フロントエンド（生成画面）

| ID | タスク | ステータス | 担当 | 期限 |
|----|--------|----------|------|------|
| P2-10 | 記事生成フォーム実装 | 🟢 | れんじろう | 2026-01-07完了 |
| P2-11 | 内部リンク入力UI | 🟢 | れんじろう | 2026-01-07完了 |
| P2-12 | プログレス表示（生成中） | 🟢 | れんじろう | 2026-01-07完了 |
| P2-13 | タイトル選択UI（3案） | 🟢 | れんじろう | 2026-01-07完了 |

### Week 7: 統合テスト

| ID | タスク | ステータス | 担当 | 期限 |
|----|--------|----------|------|------|
| P2-14 | 記事生成エンドツーエンドテスト | 🟢 | れんじろう | 2026-01-07完了 |
| P2-15 | プロンプト最適化 | 🟢 | れんじろう | 2026-01-07完了 |
| P2-16 | エラーハンドリング強化 | 🟢 | れんじろう | 2026-01-07完了 |

---

## 📋 Phase 3: チャット修正（Week 8-10）

### Week 8: チャット基盤

| ID | タスク | ステータス | 担当 | 期限 |
|----|--------|----------|------|------|
| P3-01 | チャット修正Lambda実装 | 🔴 | れんじろう | 2026-02-24 |
| P3-02 | 会話履歴管理（DynamoDB） | 🔴 | れんじろう | 2026-02-26 |
| P3-03 | 部分修正プロンプト設計 | 🔴 | れんじろう | 2026-02-26 |
| P3-04 | 差分検出・適用ロジック | 🔴 | れんじろう | 2026-02-28 |

### Week 9: チャットUI

| ID | タスク | ステータス | 担当 | 期限 |
|----|--------|----------|------|------|
| P3-05 | チャット入力欄実装 | 🔴 | れんじろう | 2026-03-03 |
| P3-06 | 会話履歴表示 | 🔴 | れんじろう | 2026-03-05 |
| P3-07 | 部分選択機能 | 🔴 | れんじろう | 2026-03-05 |
| P3-08 | 修正中のローディング表示 | 🔴 | れんじろう | 2026-03-07 |

### Week 10: 修正履歴

| ID | タスク | ステータス | 担当 | 期限 |
|----|--------|----------|------|------|
| P3-09 | 修正履歴保存（最大10件） | 🔴 | れんじろう | 2026-03-10 |
| P3-10 | 差分表示UI | 🔴 | れんじろう | 2026-03-12 |
| P3-11 | 元に戻す機能 | 🔴 | れんじろう | 2026-03-12 |
| P3-12 | チャット修正テスト | 🔴 | れんじろう | 2026-03-14 |

---

## 📋 Phase 4: Gutenbergエディタ（Week 11-14）

### Week 11: エディタ基盤

| ID | タスク | ステータス | 担当 | 期限 |
|----|--------|----------|------|------|
| P4-01 | Gutenbergライブラリ統合 | 🔴 | れんじろう | 2026-03-17 |
| P4-02 | 基本ブロック実装（Paragraph, Heading） | 🔴 | れんじろう | 2026-03-19 |
| P4-03 | リストブロック実装 | 🔴 | れんじろう | 2026-03-19 |
| P4-04 | 引用ブロック実装 | 🔴 | れんじろう | 2026-03-21 |

### Week 12: 装飾ブロック

| ID | タスク | ステータス | 担当 | 期限 |
|----|--------|----------|------|------|
| P4-05 | Groupブロック実装 | 🔴 | れんじろう | 2026-03-24 |
| P4-06 | Columnsブロック実装 | 🔴 | れんじろう | 2026-03-26 |
| P4-07 | カスタム装飾ブロック（情報ボックスなど） | 🔴 | れんじろう | 2026-03-27 |
| P4-08 | 表ブロック実装 | 🔴 | れんじろう | 2026-03-28 |

### Week 13: プレビュー

| ID | タスク | ステータス | 担当 | 期限 |
|----|--------|----------|------|------|
| P4-09 | リアルタイムプレビュー実装 | 🔴 | れんじろう | 2026-03-31 |
| P4-10 | WordPressテーマ風スタイル適用 | 🔴 | れんじろう | 2026-04-02 |
| P4-11 | レスポンシブプレビュー | 🔴 | れんじろう | 2026-04-02 |
| P4-12 | プレビューモード切り替え | 🔴 | れんじろう | 2026-04-04 |

### Week 14: ブロック操作

| ID | タスク | ステータス | 担当 | 期限 |
|----|--------|----------|------|------|
| P4-13 | ドラッグ&ドロップ並び替え | 🔴 | れんじろう | 2026-04-07 |
| P4-14 | ブロック追加・削除 | 🔴 | れんじろう | 2026-04-09 |
| P4-15 | ブロック設定パネル | 🔴 | れんじろう | 2026-04-09 |
| P4-16 | エディタ全体テスト | 🔴 | れんじろう | 2026-04-11 |

---

## 📋 Phase 5: 統合・テスト（Week 15-17）

### Week 15: 出力機能

| ID | タスク | ステータス | 担当 | 期限 |
|----|--------|----------|------|------|
| P5-01 | Gutenbergブロック形式出力 | 🔴 | れんじろう | 2026-04-14 |
| P5-02 | メタ情報出力 | 🔴 | れんじろう | 2026-04-16 |
| P5-03 | HTMLエクスポート機能 | 🔴 | れんじろう | 2026-04-16 |
| P5-04 | JSONエクスポート機能 | 🔴 | れんじろう | 2026-04-18 |

### Week 16: 記事管理

| ID | タスク | ステータス | 担当 | 期限 |
|----|--------|----------|------|------|
| P5-05 | 記事一覧画面 | 🔴 | れんじろう | 2026-04-21 |
| P5-06 | 自動保存機能（30秒ごと） | 🔴 | れんじろう | 2026-04-23 |
| P5-07 | 記事検索・フィルタ | 🔴 | れんじろう | 2026-04-23 |
| P5-08 | 記事削除・復元 | 🔴 | れんじろう | 2026-04-25 |

### Week 17: 統合テスト

| ID | タスク | ステータス | 担当 | 期限 |
|----|--------|----------|------|------|
| P5-09 | E2Eテスト（全フロー） | 🔴 | れんじろう | 2026-04-28 |
| P5-10 | パフォーマンステスト | 🔴 | れんじろう | 2026-04-30 |
| P5-11 | セキュリティテスト | 🔴 | れんじろう | 2026-04-30 |
| P5-12 | ブラウザ互換性テスト | 🔴 | れんじろう | 2026-05-02 |

---

## 📋 Phase 6: リリース（Week 18-20）

### Week 18: UI/UX改善

| ID | タスク | ステータス | 担当 | 期限 |
|----|--------|----------|------|------|
| P6-01 | UIブラッシュアップ | 🔴 | れんじろう | 2026-05-05 |
| P6-02 | エラーメッセージ改善 | 🔴 | れんじろう | 2026-05-07 |
| P6-03 | ローディング表示改善 | 🔴 | れんじろう | 2026-05-07 |
| P6-04 | チュートリアル作成 | 🔴 | れんじろう | 2026-05-09 |

### Week 19: 本番環境構築

| ID | タスク | ステータス | 担当 | 期限 |
|----|--------|----------|------|------|
| P6-05 | 本番環境AWS構築 | 🔴 | れんじろう | 2026-05-12 |
| P6-06 | CI/CDパイプライン構築 | 🔴 | れんじろう | 2026-05-14 |
| P6-07 | モニタリング設定 | 🔴 | れんじろう | 2026-05-14 |
| P6-08 | バックアップ設定 | 🔴 | れんじろう | 2026-05-16 |

### Week 20: 最終準備・リリース

| ID | タスク | ステータス | 担当 | 期限 |
|----|--------|----------|------|------|
| P6-09 | ドキュメント最終更新 | 🔴 | れんじろう | 2026-05-19 |
| P6-10 | ユーザーガイド作成 | 🔴 | れんじろう | 2026-05-21 |
| P6-11 | 本番デプロイ | 🔴 | れんじろう | 2026-05-23 |
| P6-12 | リリース後動作確認 | 🔴 | れんじろう | 2026-05-23 |
| P6-13 | 初期ユーザーフィードバック収集 | 🔴 | れんじろう | 2026-05-30 |

---

## 📌 タスク管理ルール

### タスク更新方法

1. **ステータス変更時**
   - このファイルを直接編集
   - Gitコミットで記録

2. **新規タスク追加時**
   - 該当Phaseに追加
   - IDを採番（P{Phase}-{連番}）
   - 10_change_log.mdに記録

3. **タスク完了時**
   - ステータスを🟢に変更
   - 実際の完了日をメモ

4. **タスクキャンセル時**
   - ステータスを⚫に変更
   - 理由を10_change_log.mdに記録

---

## 📊 進捗サマリー

### Phase別進捗

| Phase | タスク数 | 完了 | 進行中 | 未着手 | 進捗率 |
|-------|---------|------|--------|--------|--------|
| Phase 0 | 6 | 6 | 0 | 0 | 100% ✅ |
| Phase 1 | 9 | 9 | 0 | 0 | 100% ✅ |
| Phase 2 | 16 | 16 | 0 | 0 | 100% ✅ |
| Phase 3 | 12 | 0 | 0 | 12 | 0% |
| Phase 4 | 16 | 0 | 0 | 16 | 0% |
| Phase 5 | 12 | 0 | 0 | 12 | 0% |
| Phase 6 | 13 | 0 | 0 | 13 | 0% |
| **合計** | **84** | **31** | **0** | **53** | **37%** |

---

## 🎉 今週の成果（2026-01-07）

### 完了したタスク
- ✅ P1-03: JWT認証フロー実装
  - トークン自動リフレッシュ機能
  - 認証付きAPIクライアント
  - Lambda Authorizer
- ✅ P1-04: パスワードリセット機能
  - forgotPassword / confirmForgotPassword
  - パスワードリセット画面UI
- ✅ P1-05: 記事スタイル設定画面UI
  - テイスト/一人称/読者呼びかけ/トーン/導入スタイル
- ✅ P1-06: サンプル記事アップロード機能
  - HTML/Markdownファイルアップロード（最大3記事）
- ✅ P1-07: 装飾プリセット設定画面
  - 情報/警告/成功ボックス、吹き出し/引用/表のON/OFF
  - SEO設定
- ✅ P1-08: 設定保存API（DynamoDB）
  - manage-settings Lambda関数
- ✅ P1-09: 設定の読み込み・適用
  - settingsApi（load/save）
- ✅ P2-01: 基本プロンプトテンプレート作成
  - prompt_builder.py実装
  - build_prompt()関数
- ✅ P2-02: スタイル反映プロンプト
  - ユーザー設定（テイスト/一人称/トーン等）の反映
  - build_style_instructions()関数
- ✅ P2-03: サンプル記事学習プロンプト
  - アップロード記事からの文体学習
  - build_sample_article_context()関数
- ✅ P2-04: 内部リンク挿入プロンプト
  - 自然な内部リンク挿入指示
  - build_internal_links_instructions()関数
- ✅ P2-05: 記事生成Lambda関数実装
  - app.py: generate_article()、generate_titles()、generate_meta()
  - validators.py: 入力検証、サニタイズ
  - utils.py: ログ、レスポンス生成、文字数カウント等
- ✅ P2-07: タイトル生成（3案）
  - build_title_generation_prompt()関数
  - JSON形式で3案を生成
- ✅ P2-08: メタ情報生成
  - build_meta_generation_prompt()関数
  - SEO用メタディスクリプション、キーワード抽出
- ✅ P2-09: 内部リンク自動挿入
  - プロンプト内で自然な挿入を指示
- ✅ P2-06: Gutenbergブロック生成ロジック
  - markdownToBlocks.ts: Markdown→Gutenbergブロック変換
  - customBlocks.ts: 装飾ボックス/吹き出しカスタムブロック定義
- ✅ P2-10: 記事生成フォーム実装
  - GeneratePage.tsx: 記事生成画面
  - タイトル、対象読者、キーワード、本文要点入力
  - 記事タイプ選択（情報提供/ハウツー/レビュー）
  - 文字数設定（1000〜5000文字）
- ✅ P2-11: 内部リンク入力UI
  - 最大10件の内部リンクを追加可能
  - URL、タイトル、説明の入力フォーム
- ✅ P2-12: プログレス表示（生成中）
  - 生成中オーバーレイ、プログレスバー表示
  - ステータスメッセージ表示
- ✅ P2-13: タイトル選択UI（3案）
  - AIによる3つのタイトル案生成
  - 各タイトルの狙い説明付き選択UI

### Phase 1総括
**Phase 1は100%完了しました!** 🎉

### Phase 2完了（100%完了） 🎉
- ✅ Week 4: プロンプト設計（P2-01〜P2-04）完了
- ✅ Week 5: 記事生成Lambda（P2-05〜P2-09）完了
  - app.py: メインハンドラー（記事生成/タイトル生成/メタ生成）
  - prompt_builder.py: プロンプト構築
  - validators.py: 入力検証、サニタイズ
  - utils.py: ユーティリティ
- ✅ Week 6: フロントエンド生成画面（P2-10〜P2-13）完了
  - GeneratePage.tsx: 記事生成フォーム
  - articleApi.ts: API連携サービス
  - markdownToBlocks.ts: Gutenbergブロック変換
  - customBlocks.ts: カスタムブロック定義
- ✅ Week 7: 統合テスト（P2-14〜P2-16）完了
  - P2-14: 記事生成E2Eテスト（42件のユニットテスト）
  - P2-15: プロンプト最適化（品質チェックリスト、制約条件追加）
  - P2-16: エラーハンドリング強化
    - ErrorBoundary.tsx: Reactエラーバウンダリ
    - errorHandler.ts: エラーハンドリングユーティリティ
    - リトライ機能（指数バックオフ付き）

**Phase 2は100%完了しました!** 次のマイルストーン: Phase 3（チャット修正）に進みます

---

## 🔗 関連ドキュメント

- **00_project_overview.md** - プロジェクト全体計画（v2.0）
- **01_requirements.md** - 要件定義（v2.0）
- **10_change_log.md** - 変更履歴（v2.0）

---

**最終更新**: 2026-01-07
**次回レビュー**: P2-01完了時