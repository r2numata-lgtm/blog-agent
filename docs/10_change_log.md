# 変更履歴

**ドキュメントバージョン**: 2.0  
**最終更新日**: 2025-01-03

---

## 📋 変更管理ルール

### 変更記録フォーマット
```markdown
## YYYY-MM-DD: 変更タイトル

### 変更内容
[何を変更したか]

### 理由
[なぜ変更したか]

### 影響範囲
[どのドキュメント・コードが影響を受けるか]

### 対応タスク
[関連するタスクID]
```

---

## 📅 変更履歴

### 2025-01-03: 要件全面見直し - MVPから本開発へ移行

**変更内容**

#### 1. 開発アプローチの変更
- **旧**: MVP（Option A）→段階的拡張
- **新**: 最初から本格開発→高品質な完成品

#### 2. 出力形式の変更
- **削除**: Markdown形式、汎用HTML形式
- **採用**: Gutenbergブロック形式のみ
- WordPress標準エディタ完全対応を最優先

#### 3. 入力方式の変更
**旧の入力項目:**
- 記事タイトル（必須）
- 対象読者（任意）
- 記事の目的（任意）
- キーワード（任意）
- 本文の要点（必須）
- 文字数指定（選択式）

**新の入力項目:**
- **本文の要点（必須）** - メインの入力
- **記事タイトル（任意）** - 未入力なら自動生成（3案提示）
- **内部リンク記事（任意）** - 公開済み記事のURL（最大5記事）

#### 4. AI生成内容の拡張
**旧**: Markdown本文のみ

**新**: 
- 本文（Gutenbergブロック形式）
- タイトル（未入力時、3案提示）
- メタディスクリプション（120-160文字）
- メタキーワード（5-10個）
- スラッグ（URL用）
- 内部リンク提案（自動挿入）

#### 5. 新機能追加

**FR-002: 記事初期設定（新規）**
- 記事のテイスト設定（フォーマル/カジュアルなど）
- サンプル記事アップロード（最大3記事）
- 装飾プリセット設定
- SEO設定（メタディスクリプション長、キーワード数）

**FR-004: チャットベース記事修正（新規）**
- 会話形式での記事修正
- 部分選択修正
- 修正履歴管理（最大10件）
- 元に戻す機能

**FR-005: Gutenbergエディタ（旧エディタを全面刷新）**
- WordPress Gutenberg互換エディタ
- ブロック単位での編集
- ドラッグ&ドロップ並び替え
- リアルタイムプレビュー
- レスポンシブプレビュー

#### 6. 削除・スコープ外とした機能
- ❌ WordPress自動投稿（将来要件から削除）
- ❌ ナレッジベース蓄積（初期は不要）
- ❌ Markdown出力（Gutenbergのみに統一）
- ❌ 汎用HTML出力（Gutenbergのみに統一）

**理由**

#### なぜMVPをやめたのか
1. **中途半端なものより完成度の高いものを**
   - Markdown/HTML出力では結局WordPress側で調整が必要
   - Gutenberg完全対応なら「そのまま使える」体験を提供できる

2. **差別化ポイントの明確化**
   - 単なる記事生成ツールではなく「WordPress専用」に特化
   - チャットベース修正は競合との差別化要素

3. **学習コストの最適化**
   - MVPで妥協→後から作り直すより、最初から正しく作る方が効率的
   - Gutenbergエディタは難易度高いが、学習価値も高い

#### なぜ入力をシンプルにしたのか
1. **ユーザー負担の軽減**
   - タイトル、キーワードなどはAIに任せる
   - ユーザーは「何を書きたいか」だけに集中

2. **AI能力の最大活用**
   - Claude APIは要点から全体を構成する能力が高い
   - 細かい指定より、本質的な内容を伝える方が良い結果

#### なぜチャット修正を追加したのか
1. **1回の生成では完璧にならない現実**
   - 対話的な改善が自然なUX
   - WordやGoogleドキュメントの「提案」機能のように

2. **Claude APIの強み**
   - 会話履歴を保持できる
   - 文脈を理解した修正が可能

#### なぜ記事初期設定を追加したのか
1. **ブログ全体の統一感**
   - 同じブログなら、トーンや文体を揃えたい
   - サンプル記事から学習することで実現

2. **装飾の一貫性**
   - 毎回同じ装飾を指定する手間を省く
   - ブランドイメージの統一

**影響範囲**

#### ドキュメントの全面改訂
- **00_project_overview.md** → v2.0（全面改訂）
- **01_requirements.md** → v2.0（全面改訂）
- **02_architecture.md** → 要更新（Gutenbergエディタライブラリ追加）
- **03_database_schema.md** → 要更新（記事初期設定テーブル追加）
- **04_api_specification.md** → 要更新（新API追加）
- **05_frontend_design.md** → 要更新（Gutenbergエディタ追加）
- **06_backend_design.md** → 要更新（チャット修正Lambda追加）
- **07_prompt_templates.md** → 要更新（新プロンプト追加）
- **08_deployment_guide.md** → 影響小
- **09_testing_strategy.md** → 要更新（新機能テスト追加）
- **10_change_log.md** → 本エントリ追加
- **99_task_management.md** → 全面改訂（タスク再構成）

#### コードベースへの影響
- フロントエンド: ほぼ全面作り直し
- バックエンド: 大幅な変更
- プロンプト: 全面作り直し

#### 開発スケジュールへの影響
- **旧**: 3ヶ月（12週間）
- **新**: 4-5ヶ月（20週間）
- 理由: Gutenbergエディタ実装の複雑さ、チャット修正機能の追加

#### 予算への影響
- **旧**: 開発中 $132/月 × 3ヶ月 = $396
- **新**: 開発中 $181/月 × 5ヶ月 = $905
- 増加理由: 開発期間延長、Claude API使用量増加（チャット修正）

**対応タスク**

すべてのタスクを再構成（99_task_management.md参照）

主要な新規フェーズ:
- Phase 1: 認証・初期設定（Week 2-3）
- Phase 2: 記事生成コア（Week 4-7）
- Phase 3: チャット修正（Week 8-10）
- Phase 4: Gutenbergエディタ（Week 11-14）
- Phase 5: 統合・テスト（Week 15-17）
- Phase 6: リリース（Week 18-20）

---

### 2025-01-03: 出力形式の要件明確化（旧）

**変更内容**
- FR-005（出力機能）の要件を詳細化
- 出力形式を「Markdown」と「汎用HTML」の2種類に明確化
- 将来要件として「Gutenbergブロック形式」「テーマ別最適化」を追加
- ExportPanelコンポーネントの設計追加
- 変換ロジック（htmlConverter, markdownConverter）の実装仕様追加
- 画面設計のヘッダー部分を更新（[Markdown出力] [HTML出力]ボタン追加）

**理由**
- WordPressテーマによって最適な出力形式が異なる問題を認識
- MVP段階では汎用的なアプローチを採用し、段階的に拡張する方針に変更
- ユーザーにMarkdownプラグイン使用を推奨することで互換性と編集性を両立
- テーマ別最適化は将来要件として明確化し、段階的な実装を計画

**影響範囲**
- **01_requirements.md** - FR-005の全面改訂、将来要件-005/006追加
- **05_frontend_design.md** - ExportPanel追加、converters追加、画面設計更新
- **10_change_log.md** - 本エントリ追加
- **99_task_management.md** - 新規タスク追加（P2-07-1～P2-07-3）

**対応タスク**
- 新規タスク追加（Phase 2）:
  - P2-07-1: ExportPanelコンポーネント実装
  - P2-07-2: htmlConverter実装
  - P2-07-3: ファイルダウンロード機能実装

**備考**: この変更は上記の全面見直しにより無効化

---

### 2024-12-03: プロジェクト初期化（旧）

**変更内容**
- 全モジュールドキュメント（12ファイル）の初版作成
- プロジェクト構成の決定
- MVP（Option A）の範囲確定

**理由**
- プロジェクト開始
- 開発体制の確立
- ナレッジの体系化

**影響範囲**
- 全ドキュメント（00-99）

**対応タスク**
- P0-01: GitHubリポジトリ作成
- P0-02: モジュールファイル生成
- P0-03: Claude Project作成

**備考**: MVP方針は上記の全面見直しにより変更

---

## 🔄 変更管理プロセス

### 変更が必要な場合

1. **このファイル（10_change_log.md）に変更内容を記録**
   - 日付、変更内容、理由、影響範囲を明記

2. **影響を受けるドキュメントを特定**
   - 依存関係マップを確認
   - 関連ドキュメントをリストアップ

3. **該当ドキュメントを更新**
   - 変更内容を反映
   - ドキュメントバージョンを更新

4. **タスク管理に反映**
   - 99_task_management.md を更新
   - 必要に応じて新規タスク追加

5. **Gitにコミット**
   - 変更理由を明記
   - 関連Issue番号を記載

---

## 📊 ドキュメント依存関係マップ

```
00_project_overview.md (v2.0) (全体概要)
├── 01_requirements.md (v2.0) (要件)
│   ├── 02_architecture.md (技術選定に影響) - 要更新
│   ├── 05_frontend_design.md (UI要件に影響) - 要更新
│   └── 09_testing_strategy.md (テスト要件に影響) - 要更新
│
├── 02_architecture.md (システム構成) - 要更新
│   ├── 03_database_schema.md (DB設計) - 要更新
│   ├── 04_api_specification.md (API設計) - 要更新
│   ├── 05_frontend_design.md (技術スタック) - 要更新
│   ├── 06_backend_design.md (Lambda設計) - 要更新
│   └── 08_deployment_guide.md (デプロイ構成)
│
├── 07_prompt_templates.md - 要更新
│
├── 10_change_log.md (v2.0) (このファイル)
│
└── 99_task_management.md (v2.0) (タスク管理)
```

---

## 🔗 関連ドキュメント

全ドキュメント

---

**最終更新**: 2025-01-03  
**次回レビュー**: Phase 1完了時